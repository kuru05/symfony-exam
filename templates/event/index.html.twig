{% extends 'base.html.twig' %}

{% block title %}Liste des √©v√©nements
{% endblock %}

{% block body %}
	<div class="container py-5">
		<h1 class="mb-4 d-flex justify-content-between align-items-center">
			<span>Prochains √©v√©nements</span>
			{% if events|length > 0 %}
				<span class="badge badge-count fs-6">{{ events|length }}
					trouv√©(s)</span>
			{% endif %}
		</h1>


		<div class="card shadow-sm border-0 mb-5">
			<div class="card-body p-4 bg-filter-block rounded-3">
				<form method="get" class="row g-3 align-items-end">
					<div class="col-md-4">
						<label class="form-label fw-bold small text-uppercase text-muted">Recherche</label>
						<div class="input-group">
							<span class="input-group-text bg-input-group border-end-0">
								<i class="bi bi-search"></i>
							</span>
							<input type="text" name="q" class="form-control border-start-0 ps-0" placeholder="Concert, Atelier..." value="{{ currentFilters.q }}">
						</div>
					</div>
					<div class="col-md-3">
						<label class="form-label fw-bold small text-uppercase text-muted">Cat√©gorie</label>
						<select name="category" class="form-select">
							<option value="">Toutes</option>
							{% for category in categories %}
								<option value="{{ category.id }}" {{ currentFilters.category == category.id ? 'selected' : '' }}>{{ category.name }}</option>
							{% endfor %}
						</select>
					</div>
					<div class="col-md-3">
						<label class="form-label fw-bold small text-uppercase text-muted">Ville</label>
						<select name="city" class="form-select">
							<option value="">Toutes</option>
							{% for city in cities %}
								<option value="{{ city }}" {{ currentFilters.city == city ? 'selected' : '' }}>{{ city }}</option>
							{% endfor %}
						</select>
					</div>
					<div class="col-md-2 d-grid">
						<button type="submit" class="btn btn-primary fw-bold">Filtrer</button>
					</div>
					{% if currentFilters.q or currentFilters.category or currentFilters.city %}
						<div class="col-12 text-end mt-0">
							<a href="{{ path('app_event_index') }}" class="text-decoration-none text-muted small hover-underline">
								Effacer les filtres ‚úï
							</a>
						</div>
					{% endif %}
				</form>
			</div>
		</div>
		<div class="row g-4">
			{% for event in events %}
				<div class="col-md-4">
					<div class="card h-100 p-3">
						<div class="card-body">
							<h5 class="card-title">{{ event.title }}</h5>
							<p class="card-text text-muted small">üìÖ
								{{ event.date|date('d/m/Y H:i') }}
								‚Ä¢ üìç
								{{ event.location }}</p>
							<p class="card-text">{{ event.description|slice(0, 100) }}...</p>
							<a href="{{ path('app_event_show', {'id': event.id}) }}" class="btn btn-sm btn-primary mt-3">D√©tails</a>
						</div>
					</div>
				</div>
			{% else %}
				<div class="col-12">
					<p>Aucun √©v√©nement trouv√©.</p>
				</div>
			{% endfor %}
		</div>
	</div>
{% endblock %}
